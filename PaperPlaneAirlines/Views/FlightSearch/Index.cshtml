@using System.Runtime.InteropServices.JavaScript
@model PaperPlaneAirlines.ViewModels.FlightSearchVM;

@{
    ViewBag.Title = "Flight Search";
    Layout = "_Layout";
}

<div class="container">
    <section class=" d-flex justify-content-center mb-5">
        <form method="post" asp-action="BookingOverview" asp-controller="Booking" class="w-75">
            <div class="row mb-2">
                <div class="form-group col-sm-4 align-content-center">
                    <select asp-for="RoundTrip" id="roundTrip" class="form-control">
                        <option value="false" selected>Enkele reis</option>
                        <option value="true">Retour</option>
                    </select>
                </div>
                <div class="form-group col-sm-4 align-content-center">
                    <input class="form-control" type="number" asp-for="NumberOfPassengers" value="1"/>
                </div>
                <div class="form-group col-sm-4 align-content-center">
                    <select asp-for="SelectedTravelClassId" id="travelClass" class="form-control">
                        @foreach (var travelClass in Model.SelectionOptionsTravelClass!)
                        {
                            <option value=@travelClass.Id>@travelClass.SeatClass</option>
                        }
                    </select>
                </div>
            </div>
            <div class="row mb-3">
                <div class="form-group col-sm-3 align-content-center">
                    <label asp-for="SelectedFromCityId" class="form-label">Waar wil je vertrekken?</label>
                    <select asp-for="SelectedFromCityId" id="fromCity" class="form-control">
                        @if (Model.SelectionOptionsCity == null)
                        {
                            <option>no cities found</option>
                        }
                        else
                        {
                            @foreach (var city in Model.SelectionOptionsCity)
                            {
                                <option value=@city.Id>@city.Name</option>
                            }
                        }
                    </select>
                </div>
                <div class="form-group col-sm-3 align-content-center">
                    <label asp-for="SelectedToCityId" class="form-label">Waar wil je naartoe?</label>
                    <select asp-for="SelectedToCityId" id="toCity" class="form-control" required>
                        <option value=""> - </option>
                        @if (Model.SelectionOptionsCity == null)
                        {
                            <option>no cities found</option>
                        }
                        else
                        {
                            @foreach (var city in Model.SelectionOptionsCity)
                            {
                                <option value=@city.Id>@city.Name</option>
                            }
                        }
                    </select>
                </div>

                <div class="form-group col-sm-3">
                    <label class="form-label" asp-for="FromDate">Wanneer wil je vertrekken?</label>
                    <input id="fromDate" type="date" class="form-control" asp-for="FromDate" min="@DateTime.Now.AddDays(3).ToString("yyyy-MM-dd")" value="@DateTime.Now.AddDays(3).ToString("yyyy-MM-dd")" max="@DateTime.Now.AddMonths(6).ToString("yyyy-MM-dd")"/>
                </div>
                @*TODO: would be nice if the toDate is hidden when Enkele vlucht is selected*@
                <div class="form-group col-sm-3">
                    <label class="form-label" asp-for="ToDate">Wanneer wil je terugkomen?</label>
                    <input id="toDate" type="date" class="form-control" asp-for="ToDate"/>
                </div>
            </div>
            <div class="row mb-2">
                <div class="form-group align-content-center col">
                    <button type="submit" class="btn btn-light btn-outline-dark w-100">Zoek vluchten</button>
                </div>
            </div>
        </form>
    </section>
    <section>
        <div class="card">
            <div class="card-header">
                <h3>Speciaal voor jou</h3>
            </div>
            <div class="card-body">
                @await Html.PartialAsync("_BookingOptionsPartial", @Model.BookingOptions)
            </div>
        </div>

    </section>
</div>